<?xml version="1.0" encoding="UTF-8"?>
<con:restMockAction name="/web-outage-e/v2/houses/{houseNumber}/phone/poweroutage" method="GET" resourcePath="/web-outage-e/v2/houses/{houseNumber}/phone/poweroutage" id="9a4d503a-d8f4-4857-ae8c-2ecf32b461b6" xmlns:con="http://eviware.com/soapui/config">
  <con:settings>
    <con:setting id="9a4d503a-d8f4-4857-ae8c-2ecf32b461b6fileName">%2Fweb-outage-e%2Fv2%2Fhouses%2F%7BhouseNumber%7D%2Fphone%2Fpoweroutage1</con:setting>
  </con:settings>
  <con:defaultResponse>For isoch=false</con:defaultResponse>
  <con:dispatchStyle>SCRIPT</con:dispatchStyle>
  <con:dispatchConfig/>
  <con:dispatchPath>def phoneNumber= mockRequest.getRequestHeaders().get('phoneNumber')[0]
context.setProperty('phoneNumbers', phoneNumber)</con:dispatchPath>
  <con:dispatchXPath/>
  <con:parameterDispatcherRuleContainer>
    <con:ParameterDispatcherRule>
      <con:ruleName>isoch=false</con:ruleName>
      <con:parameterDispatcherCondition>
        <con:parameterType>QUERY</con:parameterType>
        <con:parameterOperationType>EQUALS</con:parameterOperationType>
        <con:parameterName>isoch</con:parameterName>
        <con:parameterValue>false</con:parameterValue>
      </con:parameterDispatcherCondition>
      <con:responseName>For isoch=false</con:responseName>
    </con:ParameterDispatcherRule>
  </con:parameterDispatcherRuleContainer>
  <con:routeEnabled>true</con:routeEnabled>
  <con:routeScript/>
  <con:saveRoutedResponse>true</con:saveRoutedResponse>
  <con:response name="For isoch=false" id="754426eb-0c6f-4d22-8d63-524857cd4730" httpResponseStatus="200" mediaType="application/json" encoding="UTF-8" compressedBodyContent="aced00057372002f636f6d2e657669776172652e736f617075692e696d706c2e737570706f72742e436f6d7072657373656456616c7565000b8b02c748eeab0200035a000a636f6d707265737365644c000b636f6d7072657373696f6e74003d4c636f6d2f657669776172652f736f617075692f696d706c2f737570706f72742f436f6d7072657373656456616c756524436f6d7072657373696f6e3b5b0004646174617400025b427870007e72003b636f6d2e657669776172652e736f617075692e696d706c2e737570706f72742e436f6d7072657373656456616c756524436f6d7072657373696f6e00000000000000001200007872000e6a6176612e6c616e672e456e756d000000000000000012000078707400044e4f4e4570" dataSource="">
    <con:settings/>
    <con:script>qps = mockRequest.getQueryString().split('&amp;')
def mapParams = qps.collectEntries { params -> params.split('=').collect { URLDecoder.decode(it)}}  
if (mapParams['delay']){
    for( String values : qps ) {
        if ( values.contains("delay=") ) {
            def delay = (values.split("=")[1]as int)
            sleep(delay)
        }
    }
} else {
    int time = 200
    sleep(time)
}</con:script>
    <con:responseContent>{
  "success": true,
  "apiName": "web-outage-e",
  "timestamp": "2022-06-27T17:36:27.41Z",
  "version": "3.0.0-SNAPSHOT",
  "correlationId": "abef9320-f63f-11ec-99ad-161c692046ff",
  "data": {
    "checkOutageResponse": {
      "affectedNumberOfCustomers": "0",
      "billAccountNumber": 6821800121,
      "companyCode": "17",
      "estimatedRestorationDateTime": "0001-01-01T00:00:00",
      "houseNumber": "${houseNumber}",
      "isPowerOn": true,
      "lastUpdatedDateTime": "0001-01-01T00:00:00",
      "outageCauseDescription": null,
      "outageDateTime": "0001-01-01T00:00:00",
      "outageStatusDescription": null,
      "phoneNumber": "${phoneNumbers}",
      "postalCode": "63119",
      "premiseNumber": "682180001",
      "reportAlert": false,
      "reportedNotProcessed": false,
      "restoredDateTime": "0001-01-01T00:00:00",
      "state": null
    },
    "premiseAddressResponse": {
      "addressId": 682180001,
      "addressTypeCode": "P",
      "addressTypeDescription": "Premise",
      "isReadOnly": "N",
      "line1": "1000001 NOTASTREET LN",
      "line2": "",
      "line3": "",
      "city": "CLASH CITY",
      "stateOrProvince": "MO",
      "postalCode": "11111",
      "country": "USA"
    },
    "systemAvailability": "true"
  }
}</con:responseContent>
    <con:header>
      <con:name>X-Frame-Options</con:name>
      <con:value>SAMEORIGIN</con:value>
    </con:header>
    <con:header>
      <con:name>Strict-Transport-Security</con:name>
      <con:value>max-age=31536000; includeSubdomains;</con:value>
    </con:header>
    <con:header>
      <con:name>X-Content-Type-Options</con:name>
      <con:value>nosniff</con:value>
    </con:header>
    <con:header>
      <con:name>Connection</con:name>
      <con:value>keep-alive</con:value>
    </con:header>
    <con:header>
      <con:name>X-XSS-Protection</con:name>
      <con:value>1; mode=block</con:value>
    </con:header>
    <con:header>
      <con:name>Date</con:name>
      <con:value>Mon, 27 Jun 2022 17:36:27 GMT</con:value>
    </con:header>
  </con:response>
</con:restMockAction>
